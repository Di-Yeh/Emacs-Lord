#+TITLE: 我的 Emacs 配置 🌀
#+AUTHOR: 你的名字
#+OPTIONS: toc:t num:nil
#+STARTUP: showeverything inlineimages
#+PROPERTY: header-args :results silent

* 📸 预览

#+ATTR_ORG: :width 800
[[https://github.com/user-attachments/assets/445e6c38-0d17-47b3-a490-2d4d5d8734cd][img1]]
[[https://github.com/user-attachments/assets/3140f8c6-a340-41ed-a637-96eccb6ca42a][img2]]
[[https://github.com/user-attachments/assets/7452c367-4b28-4e42-b739-d374e4709b3f][img3]]
[[https://github.com/user-attachments/assets/99d53400-447b-4ace-9a7a-86a1e82af67a][img4]]

* ✒️ 字体配置

**Windows**

将 =fonts/= 目录下的所有字体移动到：

#+begin_example
C:\Windows\Fonts\
#+end_example

**Linux**

1. 创建字体目录：

   #+begin_src bash
   mkdir -p ~/.fonts
   #+end_src

2. 复制字体：

   #+begin_src bash
   cp *.ttf ~/.fonts/
   #+end_src

3. 更新字体缓存：

   #+begin_src bash
   fc-cache -fv
   #+end_src

* 🏗️ 安装

**Emacs 下载**

- Windows: [[https://ftp.gnu.org/gnu/emacs/windows/][下载链接1]] ｜ [[https://mirror.ossplanet.net/gnu/emacs/windows/][下载链接2]]
- Linux:

  #+begin_src bash
  sudo apt install emacs
  #+end_src

**操作系统**

- [[#Windows🪟][Windows 安装]]
- [[#Linux🐧][Linux 安装]]

* 🪟 Windows 安装指南

**通用开发环境**

- [[https://git-scm.com/downloads/win][Git]]
- [[https://releases.llvm.org/download.html][Clang]]
- [[https://www.sbcl.org/platform-table.html][SBCL]]
- [[https://download.racket-lang.org/][Racket]]
- [[https://www.msys2.org/][MSYS2]] / [[https://sourceforge.net/projects/mingw/][Mingw]]
- [[https://cmake.org/download/][CMake]]
- [[https://www.python.org/downloads/][Python]]
- [[https://nodejs.org/zh-cn/download][NodeJS]]
- [[https://luabinaries.sourceforge.net/download.html][Lua]]
- [[https://www.masm32.com/download.htm][MASM]]

**Clojure 开发环境**

- [[https://github.com/casselc/clj-msi][Clojure 安装包]]
- [[https://adoptium.net/zh-CN][OpenJDK]]
- [[https://github.com/clj-kondo/clj-kondo?tab=readme-ov-file#installation][clj-kondo]]

**EAF 配置**

1. 克隆项目：

   #+begin_src bash
   git clone --depth=1 -b master https://github.com/emacs-eaf/emacs-application-framework.git site-lisp/emacs-application-framework
   #+end_src

2. 安装 Python 3.12 与依赖：

   #+begin_src bash
   pip3 install PyQt6 pyqt6-webengine sexpdata epc fitz frontend
   #+end_src

3. 安装：

   #+begin_src bash
   chmod +x ./install-eaf.py
   ./install-eaf.py
   #+end_src

**lsp-bridge 配置**

#+begin_src bash
pip3 install epc orjson sexpdata six paramiko watchdog pyright setuptools
#+end_src

**dirvish 配置**

- [[https://github.com/sharkdp/fd/releases][fd 下载]]
- 或用 Winget: `winget install sharkdp.fd`
- 安装 VIPS thumbnail: `pacman -S mingw-w64-ucrt-x86_64-libvips`

**pandoc 配置**

- [[https://github.com/jgm/pandoc/releases][pandoc 下载链接]]

将可执行文件放入环境变量目录

* 🐧 Linux 安装指南

适用于 Debian / Mint / Ubuntu / Kali

**环境设置**

#+begin_src bash
sudo apt install git clang clang++ clang-format gcc g++ sbcl racket cmake
#+end_src

**安装 racket-langserver**

#+begin_src bash
raco pkg install racket-langserver
#+end_src

**Python 安装（推荐使用 pyenv）**

1. 安装依赖：

   #+begin_src bash
   sudo apt update
   sudo apt install -y make build-essential libssl-dev zlib1g-dev \
   libbz2-dev libreadline-dev libsqlite3-dev curl git libncursesw5-dev \
   xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev
   #+end_src

2. 安装 pyenv：

   #+begin_src bash
   curl https://pyenv.run | bash
   #+end_src

3. 配置环境变量（写入 ~/.bashrc 或 ~/.zshrc）：

   #+begin_src shell
   export PYENV_ROOT="$HOME/.pyenv"
   export PATH="$PYENV_ROOT/bin:$PATH"
   eval "$(pyenv init -)"
   #+end_src

4. 安装并设置版本：

   #+begin_src bash
   pyenv install 3.11.9
   pyenv global 3.11.9
   #+end_src

**NodeJS 与 Lua**

#+begin_src bash
sudo apt install nodejs npm lua[version]
#+end_src

**汇编工具 & 终端库**

#+begin_src bash
sudo apt install nasm libvterm-dev cmake make gcc
#+end_src

**Clojure 安装**

#+begin_src bash
sudo apt install openjdk-17-jdk clojure leiningen
#+end_src

安装 clj-kondo：

#+begin_src bash
curl -sLO https://raw.githubusercontent.com/clj-kondo/clj-kondo/master/script/install-clj-kondo
chmod +x install-clj-kondo
./install-clj-kondo
#+end_src

**EAF 安装**

参考 [[*EAF 配置][EAF 配置]]

**lsp-bridge 安装**

#+begin_src bash
pip install epc orjson sexpdata six paramiko watchdog pyright setuptools
#+end_src

**dirvish 支援工具**

#+begin_src bash
sudo apt install fd-find libvips-tools ffmpegthumbnailer imagemagick poppler-utils
#+end_src

**pandoc 安装**

参见 [[https://github.com/jgm/pandoc/releases][官方下载页]]

* 📝 附录

- 如果你在 Windows 使用 Emacs，请使用 `msys2` 提供的环境运行 CLI 程序更为稳定。
- 如果你是 Lisp/Clojure 爱好者，可以搭配 `paredit`、`lispyville`、`lsp-mode` 与 `corfu` 强化开发体验。
